{"name":"Docker-phpbb","tagline":"Запуск phpBB через docker","body":"# docker-phpbb\r\n\r\nДополнение к <a href=\"http://blog.derz.co/posts/2015/02/27/chast-11-docker-vvedenie/\" target=\"_blank\">серии статей</a> о запуске phpBB с помощью docker.\r\n---\r\n\t┌───────────────┐     ┌───────────────┐                               \r\n\t│               │     │               │                               \r\n\t│mysql_datastore◀━━━━━▶     mysql     │                 \r\n\t│               │     │               │                              \r\n\t└───────────────┘     └───────△───────┘   ┌──────────────────┐        \r\n\t                              │           │                  │   HTTP \r\n\t                              │           │      nginx       ├────◎   \r\n\t                              │           │                  │        \r\n\t┌───────────────┐     ┌───────▽───────┐   └─────────△────────┘        \r\n\t│               │     │               │             │                 \r\n\t│nginx_datastore◀━━━━━▶    php-fpm    ◁─────────────┘                 \r\n\t│               │     │               │                               \r\n\t└───────────────┘     └───────────────┘                               \r\n\t                                                                      \r\n\t                                                                      \r\n\t◀━━━━━━━━▶  volumes-from                                              \r\n\t                                                                      \r\n\t◁────────▷  link                                                      \t\r\n---\r\n### Краткое содержание\r\n\r\nНеобходимо склонировать репозиторий. Все дальнейшие действия выполнять в корне репозитория.\r\n\r\n* Создание контейнеров:  \r\n  * docker build -t mysql_datastore mysql_datastore/  \r\n  * docker build -t nginx_datastore nginx_datastore/  \r\n  * docker build -t php-fpm php-fpm/  \r\n  * docker build -t nginx nginx/  \r\n  * docker pull mysql  \r\n\r\n* Запуск контейнеров:  \r\n  * docker run --name mysql_datastore mysql_datastore true  \r\n  * docker run --name nginx_datastore nginx_datastore true  \r\n  * docker run --name mysql --volumes-from mysql_datastore \\  \r\n  -e MYSQL_ROOT_PASSWORD=YourRootPass -e MYSQL_DATABASE=phpBB \\  \r\n  -e MYSQL_USER=phpBBuser -e MYSQL_PASSWORD=PhpbbDbPass -d mysql  \r\n  * docker run --name php-fpm --link mysql:mysql \\  \r\n  --volumes-from nginx_datastore -d php-fpm  \r\n  * docker run --name nginx --privileged --link php-fpm:php-fpm \\  \r\n  --volumes-from nginx_datastore -p 80:80 -d nginx  \r\n\r\n* Конфигурация форума:\r\n\r\nНа этапе \"Установка: Настройка базы данных\" необходимо заполнить поля в соответствии с данными, которые задали при старте контейнера mysql. Контейнер php-fpm знает контейнер с базой данных как mysql (`--link mysql:mysql`) что и будет являться адресом в \"Имя сервера БД\".\r\n\r\n![docker-phpbb](https://raw.githubusercontent.com/nezloi/docker-phpbb/master/screenshot.jpg)\r\n\r\n<a href=\"http://blog.derz.co/posts/2015/02/27/chast-11-docker-vvedenie/\" target=\"_blank\">Подробное описание выбранной стратегии и лучшие практики.</a>","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}